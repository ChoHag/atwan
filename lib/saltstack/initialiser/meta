# Include steps in the initialiser package to install and configure a salt minion as
# the configuration management tool.

at_steps=(
  bootstrap
  pre/configuration
)

ats_bootstrap_summary='[ -B [-C <command-line>] [-E <git repository>] ]'
IFS='' read -r -d '' ats_bootstrap_options <<'EOF' || true
    -B: Create a bootstrap iso.
    -C: Extra options to the salt-call command.
    -E: A git repository which has been constructed according to rules I'm
        still pulling out of my arse.
EOF
ats_bootstrap_getopts=BC:E:

ats_configuration_summary="$ats_configuration_summary [-M <salt master>] [-P <master fingerprint> | -W]"
IFS='' read -r -d '' ats_configuration_options <<EOF || true
$ats_configuration_options
    -M: The salt master address to connect to from the minion.
    -P: Fingerprint of the salt master's public key.
    -W: Connect to an unverified salt master (mnemonic: pwn me).
    -z: Perform the configuration step in the atwan plugin (openssh).
EOF
ats_configuration_getopts=${ats_configuration_getopts}M:P:Wz
